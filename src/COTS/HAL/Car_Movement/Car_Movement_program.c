/* FILENAME: Car_Movement_program 
*  Author:  Ali El Bana
*  Version:  V1.0
*  DATE:   Tue 03/14/2023
*/

/************************************************************************/
/*                        Include headers                        	    */
/************************************************************************/

#include "../../LIB/LSTD_TYPES.h"
#include "../../LIB/LSTD_COMPILER.h"
#include "../../LIB/LSTD_VALUES.h"
#include "../../LIB/LSTD_BITMATH.h"

#include "../../MCAL/GPIO/GPIO_interface.h"
#include "../../MCAL/SysTick/SysTick_interface.h"
#include "../../MCAL/TIM1/TIM1_interface.h"

#include "../DCMOTOR/DCM_interface.h"

#include "Car_Movement_interface.h"
#include "Car_Movement_private.h"
#include "Car_Movement_config.h"

/************************************************************************/
/*                     Functions implementations                      	*/
/************************************************************************/

void HCarMove_vInit( void )
{

	HDCM_vInitMotor( &Motor1 ) ;
	HDCM_vInitMotor( &Motor3 ) ;

}

/*******************************************************************************************************************/
/******************************************************************************************************************/

void HCarMove_vSpeedRatio( u16_t A_u16SpeedRatio )
{

	HDCM_vMotorSpeedCntrl( &Motor1, A_u16SpeedRatio ) ;
	HDCM_vMotorSpeedCntrl( &Motor3, A_u16SpeedRatio ) ;

}

/*******************************************************************************************************************/
/******************************************************************************************************************/

void HCarMove_vForward( void )
{

	/* IN1 = 1, IN2 = 0, IN3 = 1, IN4 = 0 */

	HDCM_vMoveForward( &Motor1 ) ;
	HDCM_vMoveForward( &Motor3 ) ;

}

/*******************************************************************************************************************/
/******************************************************************************************************************/

void HCarMove_vBackward( void )
{

	/* IN1 = 0, IN2 = 1, IN3 = 0, IN4 = 1 */

	HDCM_vMoveBackward( &Motor1 ) ;
	HDCM_vMoveBackward( &Motor3 ) ;

}

/*******************************************************************************************************************/
/******************************************************************************************************************/

void HCarMove_vRight( void )
{

	/* IN1 = 1, IN2 = 0, IN3 = 0, IN4 = 0 */

	HDCM_vMoveForward( &Motor1 ) ;
	HDCM_vStopMotor	 ( &Motor3 ) ;

}

/*******************************************************************************************************************/
/******************************************************************************************************************/

void HCarMove_vLeft( void )
{

	/* IN1 = 0, IN2 = 0, IN3 = 1, IN4 = 0 */

	HDCM_vStopMotor  ( &Motor1 ) ;
	HDCM_vMoveForward( &Motor3 ) ;

}

/*******************************************************************************************************************/
/******************************************************************************************************************/

void HCarMove_vStop( void )
{

	/* IN1 = 0, IN2 = 0, IN3 = 0, IN4 = 0 */

	HDCM_vStopMotor( &Motor1 ) ;
	HDCM_vStopMotor( &Motor3 ) ;

}

/*******************************************************************************************************************/
/******************************************************************************************************************/

u32_t HCarMove_u32GetCarSpeed( void )
{

	u32_t L_u32SpeedValue = INITIAL_ZERO ;

	L_u32SpeedValue = HDCM_vGetSpeedValue( &Motor1 ) ;

	return L_u32SpeedValue ;

}

/*******************************************************************************************************************/
/******************************************************************************************************************/



